# USE ALPINE LINUX AS BASE IMAGE (TO ALLOW BASH NAVIGATION)
FROM envoyproxy/envoy-alpine:0f88bc5113d4cce320045c3cd11d626af69bd775

MAINTAINER DKF-Basel <info@dkfbasel.ch>
LABEL copyright="Departement Klinische Forschung, Basel, Switzerland. 2017"

# COPY THE APPLICATIN FILES INTO THE CONTAINER
RUN mkdir /app
ADD bin/client /app/bin/client

# ADD STARTUP SCRIPTS
ADD scripts/client.sh /app/scripts/client.sh

# ADD ENVOY CONFIGURATION
ADD envoy/client.json /app/envoy/client.json

# CREATE A DIRECTORY FOR ENVOY LOGS
RUN mkdir /var/log/envoy/

# SET THE CURRENT WORKING DIRECTORY
WORKDIR /app

#Â START THE APPLICATION WITH THE CONTAINER
CMD ["/app/scripts/client.sh"]
