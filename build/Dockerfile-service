# USE ALPINE LINUX AS BASE IMAGE (TO ALLOW BASH NAVIGATION)
FROM envoyproxy/envoy-alpine:latest

MAINTAINER DKF-Basel <info@dkfbasel.ch>
LABEL copyright="Departement Klinische Forschung, Basel, Switzerland. 2017"

# COPY THE APPLICATIN FILES INTO THE CONTAINER
RUN mkdir /app
ADD bin /app/bin

# ADD STARTUP SCRIPTS
ADD scripts /app/scripts

# ADD ENVOY CONFIGURATION
ADD envoy /app/envoy
RUN mkdir /var/log/envoy/

# SET THE CURRENT WORKING DIRECTORY
WORKDIR /app

#Â START THE APPLICATION WITH THE CONTAINER
CMD ["/app/scripts/service.sh"]
